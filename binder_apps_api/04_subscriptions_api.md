# üìò Binder API SubscriptionController Documentation

## Module Base Path
`/api/v1/subscriptions/{method}`


## 'getActiveSubscriptions' (default)
### –î–æ—Å—Ç—É–ø: `user`

**GET** `/api/v1/subscriptions/` –∏–ª–∏ `/api/v1/subscriptions/getActiveSubscriptions`

### –û–ø–∏—Å–∞–Ω–∏–µ:
–ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –¥–µ–π—Å—Ç–≤—É—é—â–∏–µ –ø–æ–¥–ø–∏—Å–∫–∏.

### –û—Ç–≤–µ—Ç:
- **200 OK**
```json
{
	"ok": true,
	"message": "Subscriptions received",
	"data": [
		{
			"id": 4,
			"transaction_id": 388473,
			"user_id": 42,
			"tariff_id": 3,
			"entity": "vendor",
			"entity_uuid": "uuid-2",
			"dt_from": "2025-07-24 00:00:00",
			"dt_to": "2026-08-24 00:00:00"
		},
		{
			"id": 8,
			"transaction_id": 388493,
			"user_id": 42,
			"tariff_id": 3,
			"entity": "vendor",
			"entity_uuid": "uuid-2",
			"dt_from": "2025-08-24 00:00:00",
			"dt_to": "2026-09-24 00:00:00"
		}
	]
}
```
–í `data` - –º–∞—Å—Å–∏–≤ –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–¥–ø–∏—Å–æ–∫, –≥–¥–µ:\
"transaction_id" - id —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –≤ be-pay, –∫–æ—Ç–æ—Ä—ã–π –±—ã–ª –ø–µ—Ä–µ–¥–∞–Ω –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –ø–æ–¥–ø–∏—Å–∫–∏\
"entity" - –Ω–∞ –∫–∞–∫—É—é —Å—É—â–Ω–æ—Å—Ç—å –ø–æ–¥–ø–∏—Å–∫–∞ (–ø–æ–∫–∞ —Ç–æ–ª—å–∫–æ `vendor`)\
"entity_uuid" - uuid —Å—É—â–Ω–æ—Å—Ç–∏ (–≤ –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ uuid –≤–µ–Ω–¥–æ—Ä–∞, —Ç–æ –µ—Å—Ç—å –∞–∫–∫–∞—É–Ω—Ç–∞ touchapi –∏–ª–∏ crm)\
"dt_from" - –¥–∞—Ç–∞, —Å –∫–æ—Ç–æ—Ä–æ–π –ø–æ–¥–ø–∏—Å–∫–∞ –¥–µ–π—Å—Ç–≤—É–µ—Ç
"dt_to" - –¥–∞—Ç–∞, –¥–æ –∫–æ—Ç–æ—Ä–æ–π –ø–æ–¥–ø–∏—Å–∫–∞ –¥–µ–π—Å—Ç–≤—É–µ—Ç

> –ï—Å–ª–∏ —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –æ–ø–ª–∞—á–µ–Ω–æ —É–∂–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–µ—Ä–∏–æ–¥–æ–≤ –∏ –æ–Ω–∏ –µ—â–µ –Ω–µ –∏—Å—Ç–µ–∫–ª–∏, –±—É–¥—É—Ç –≤—ã–≤–µ–¥–µ–Ω—ã –≤—Å–µ. –í —Ç–æ–º —á–∏—Å–ª–µ –∏ –±—É–¥—É—â–∏–µ. –≠—Ç–æ –±—É–¥—É—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ –ø–æ–¥–ø–∏—Å–∫–∏, –Ω–æ —Å —Ä–∞–∑–Ω—ã–º `transaction_id`. –ü—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç—Å—è, —á—Ç–æ –≤ —Ä–∞–º–∫–∞—Ö –æ–¥–Ω–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –º–æ–∂–µ—Ç –ø—Ä–∏–æ–±—Ä–µ—Å—Ç–∏ —Å—Ä–∞–∑—É –Ω–µ—Å–æ–∫–æ–ª—å–∫–æ –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö –ø–æ–¥–ø–∏—Å–æ–∫, –Ω–∞–ø—Ä–∏–º–µ—Ä, 3 –ø–æ 1 –º–µ—Å—è—Ü—É. –û–Ω –¥–æ–ª–∂–µ–Ω –≤—ã–±—Ä–∞—Ç—å –∏–º–µ–Ω–Ω–æ –æ–¥–∏–Ω —Ç–∞—Ä–∏—Ñ –Ω—É–∂–Ω–æ–≥–æ –≤–∏–¥–∞ –∏ –ø–æ –Ω—É–∂–Ω–æ–º—É –∞–∫–∫–∞—É–Ω—Ç—É (–≤–µ–Ω–¥–æ—Ä—É), —Ç.–µ. —Å –ø–µ—Ä–∏–æ–¥–æ–º –¥–µ–π—Å—Ç–≤–∏—è - 3 –º–µ—Å—è—Ü–∞, –µ—Å–ª–∏ —Ç–∞–∫–æ–π –µ—Å—Ç—å.


## 'createSubscriptions`
### –î–æ—Å—Ç—É–ø: `user`

**POST** `/api/v1/subscriptions/createSubscriptions`

### –û–ø–∏—Å–∞–Ω–∏–µ:
–°–æ–∑–¥–∞—Ç—å –ø–æ–¥–ø–∏—Å–∫–∏. –•—É–∫ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∫–∏–Ω—É—Ç—å –ø—Ä–∏ –ø—Ä–∏–æ–±—Ä–µ—Ç–µ–Ω–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º –ø–æ–¥–ø–∏—Å–æ–∫ –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ.

### –¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:
```json
{
	"transaction_id": 388493,
	"subscriptions": [
			{
			"tariff_id": 3,
			"entity": "vendor",
			"entity_uuid": "uuid-1344564-dffhfh9as"
			},
			{
			"tariff_id": 4,
			"entity": "vendor",
			"entity_uuid": "uuid-2344234-sdf6769as"
			}
	],
	"transaction_dt": "2025-07-24 00:00:00"
}
```
`transaction_id` - id —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –≤ –±–∞–∑–µ be-pay (–ø–æ–∫—É–ø–∫–∞ —Ç–∞—Ä–∏—Ñ–∞)
`subscriptions` - –º–∞—Å—Å–∏–≤ –æ–ø–ª–∞—á–µ–Ω–Ω—ã—Ö –ø–æ–¥–ø–∏—Å–æ–∫, —Ç–æ –µ—Å—Ç—å –º–∞—Å—Å–∏–≤ –æ–ø–ª–∞—á–µ–Ω–Ω—ã—Ö –∞–∫–∫–∞—É–Ω—Ç–æ–≤ (vendor), –ø—Ä–∏ —Ç–µ–∫—É—â–µ–º UI –≤ –º–∞—Å—Å–∏–≤–µ –±—É–¥–µ—Ç –æ–¥–∏–Ω —ç–ª–µ–º–µ–Ω—Ç.
`transaction_dt` - –¥–∞—Ç–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ (–ø–æ–∫—É–ø–∫–∞ —Ç–∞—Ä–∏—Ñ–∞)
> `transaction_dt` —Å—á–∏—Ç–∞–µ—Ç—Å—è –¥–∞—Ç–æ–π –Ω–∞—á–∞–ª–∞ –¥–µ–π—Å—Ç–≤–∏—è –ø–æ–¥–ø–∏—Å–∫–∏, –µ—Å–ª–∏ –ø–æ –¥–∞–Ω–Ω–æ–º—É —Ç–∞—Ä–∏—Ñ—É –Ω–µ—Ç –¥–µ–π—Å—Ç–≤—É—é—â–µ–π –ø–æ–¥–ø–∏—Å–∫–∏. –ï—Å–ª–∏ –¥–µ–π—Å—Ç–≤—É—é—â–∞—è –ø–æ–¥–ø–∏—Å–∫–∞ –µ—Å—Ç—å, —Ç–æ –¥–∞—Ç–æ–π –Ω–∞—á–∞–ª–∞ –±—É–¥–µ—Ç —Å—á–∏—Ç–∞—Ç—å—Å—è –¥–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è –ø–æ—Å–ª–µ–¥–Ω–µ–π –¥–µ–π—Å—Ç–≤—É—é—â–µ–π –ø–æ–¥–ø–∏—Å–∫–∏.


### –û—Ç–≤–µ—Ç:
- **200 OK**
```json
{
	"ok": true,
	"message": "Subscriptions created (0 - subscription already was in db)",
	"data": {
		"subscription_ids_created": [
			8,
			9
		]
	}
}
```
`subscription_ids_created` - –º–∞—Å—Å–∏–≤ id —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö –ø–æ–¥–ø–∏—Å–æ–∫



## 'getHistory`
### –î–æ—Å—Ç—É–ø: `user`

**GET** `/api/v1/subscriptions/getHistory`
**POST** `/api/v1/subscriptions/getHistory`

### –û–ø–∏—Å–∞–Ω–∏–µ:
–ü–æ–ª—É—á–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é –ø–æ–¥–ø–∏—Å–æ–∫.

–¥–ª—è POST –∑–∞–ø—Ä–æ—Å–∞
### –¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:
```json
{
	"dt_from":"2023-08-24 00:00:00"
}
```

`dt_from` - –¥–∞—Ç–∞, —Å –∫–æ—Ç–æ—Ä–æ–π –Ω–∞–¥–æ –ø–æ–ª—É—á–∏—Ç—å –≤—Å–µ –ø–æ–¥–ø–∏—Å–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–∏–∑—Ä–∞—Å—Ö–æ–¥–æ–≤–∞–Ω–Ω—ã–µ –∏ –¥–µ–π—Å—Ç–≤—É—é—â–∏–µ)


### –û—Ç–≤–µ—Ç:
- **200 OK**
```json
{
	"ok": true,
	"message": "Subscriptions history received",
	"data": [
		{
			"id": 4,
			"transaction_id": 388473,
			"user_id": 42,
			"tariff_id": 3,
			"entity": "vendor",
			"entity_uuid": "uuid-2",
			"dt_from": "2025-07-24 00:00:00",
			"dt_to": "2024-08-24 00:00:00"
		},
		{
			"id": 8,
			"transaction_id": 388493,
			"user_id": 42,
			"tariff_id": 3,
			"entity": "vendor",
			"entity_uuid": "uuid-2",
			"dt_from": "2025-08-24 00:00:00",
			"dt_to": "2024-09-24 00:00:00"
		}
	]
}
```
–≤ `data` –º–∞—Å—Å–∏–≤ –≤—Å–µ—Ö –ø–æ–¥–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
